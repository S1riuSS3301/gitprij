module.exports=[33508,a=>{"use strict";var b=a.i(62213);a.s(["X",()=>b.default])},18284,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,c.createContext)(void 0);function e({children:a}){return(0,b.jsx)(d.Provider,{value:{currency:"USD",setCurrency:a=>{},formatPrice:a=>`$${a.toFixed(2)}`,convertPrice:a=>a},children:a})}function f(){let a=(0,c.useContext)(d);if(!a)throw Error("useCurrency must be used within CurrencyProvider");return a}a.s(["CurrencyProvider",()=>e,"useCurrency",()=>f])},37758,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(a,b)=>{},e="vds_hub_servers",f="vds_hub_transactions",g="vds_hub_promo_codes",h="vds_hub_referrals",i="vds_hub_support_tickets";var j=a.i(38422),k=a.i(77687);let l=(0,c.createContext)(void 0);function m({children:a}){let{user:m,updateUser:n}=(0,j.useAuth)(),{toast:p}=(0,k.useToast)(),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),A=()=>{r([]),t([]),v([]),x([]),z([])};(0,c.useEffect)(()=>{A()},[]);let B=a=>{let b=[...s,{...a,id:o(),createdAt:new Date().toISOString()}];if(t(b),d(f,b),"topup"===a.type&&"completed"===a.status&&m){let b=w.filter(a=>a.referredId===m.id);if(b.length>0){let c=.1*a.amount,e=b[0],f=w.map(a=>a.id===e.id?{...a,earnings:a.earnings+c}:a);x(f),d(h,f)}}};return(0,b.jsx)(l.Provider,{value:{servers:q,transactions:s,promoCodes:u,referrals:w,supportTickets:y,createServer:a=>{if(!m)return;let b=[...q,{...a,id:o(),userId:m.id,createdAt:new Date().toISOString()}];r(b),d(e,b),n({balance:m.balance-a.price}),B({userId:m.id,type:"purchase",amount:-a.price,status:"completed",description:`Purchased server: ${a.name}`}),p({title:"Сервер создан!",description:`Сервер ${a.name} успешно создан`})},deleteServer:a=>{let b=q.filter(b=>b.id!==a);r(b),d(e,b),p({title:"Сервер удален",description:"Сервер успешно удален"})},updateServer:(a,b)=>{let c=q.map(c=>c.id===a?{...c,...b}:c);r(c),d(e,c)},addTransaction:B,createPromoCode:a=>{let b=[...u,{...a,id:o(),currentUses:0}];v(b),d(g,b),p({title:"Промокод создан",description:`Промокод ${a.code} успешно создан`})},applyPromoCode:(a,b)=>{let c=u.find(b=>b.code===a&&b.active&&b.currentUses<b.maxUses&&new Date(b.expiresAt)>new Date);if(!c)return p({title:"Ошибка",description:"Промокод недействителен или истек",variant:"destructive"}),b;let e=u.map(a=>a.id===c.id?{...a,currentUses:a.currentUses+1}:a);v(e),d(g,e);let f="percentage"===c.type?b*(c.discount/100):c.discount;return p({title:"Промокод применен!",description:`Скидка: ${f.toFixed(2)}$`}),b-f},createSupportTicket:a=>{if(!m)return;let b=[...y,{...a,id:o(),userId:m.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];z(b),d(i,b),p({title:"Тикет создан",description:"Ваш запрос отправлен в поддержку"})},refreshData:()=>{A()}},children:a})}function n(){let a=(0,c.useContext)(l);if(void 0===a)throw Error("useData must be used within a DataProvider");return a}function o(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}a.s(["DataProvider",()=>m,"useData",()=>n],37758)}];

//# sourceMappingURL=_a79ea5f1._.js.map