module.exports=[45838,a=>{"use strict";var b=a.i(92734),c=(0,b.createServerReference)("6022c80cd4e981877f43f4227f1f409d7c55804be4",b.callServer,void 0,b.findSourceMapURL,"signIn");a.s(["signIn",()=>c])},54188,(a,b,c)=>{"use strict";b.exports=a.r(34056).vendored.contexts.HooksClientContext},53894,(a,b,c)=>{"use strict";b.exports=a.r(34056).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},34056,(a,b,c)=>{"use strict";b.exports=a.r(18622)},28308,(a,b,c)=>{"use strict";b.exports=a.r(34056).vendored["react-ssr"].ReactJsxRuntime},13655,(a,b,c)=>{"use strict";b.exports=a.r(34056).vendored["react-ssr"].React},79937,(a,b,c)=>{"use strict";b.exports=a.r(34056).vendored.contexts.AppRouterContext},25457,(a,b,c)=>{"use strict";b.exports=a.r(34056).vendored["react-ssr"].ReactServerDOMTurbopackClient},41898,(a,b,c)=>{"use strict";b.exports=a.r(34056).vendored["react-ssr"].ReactDOM},63834,a=>{"use strict";var b=a.i(13655);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],63834)},80459,a=>{"use strict";var b=a.i(92734),c=(0,b.createServerReference)("787dde5be26b34864e2b887886b5ba77f14ae60fdb",b.callServer,void 0,b.findSourceMapURL,"signUp");a.s(["signUp",()=>c])},40565,a=>{"use strict";var b=a.i(13655);let c=0,d=new Map,e=a=>{if(d.has(a))return;let b=setTimeout(()=>{d.delete(a),h({type:"REMOVE_TOAST",toastId:a})},1e6);d.set(a,b)},f=[],g={toasts:[]};function h(a){g=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?e(c):a.toasts.forEach(a=>{e(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(g,a),f.forEach(a=>{a(g)})}function i({...a}){let b=(c=(c+1)%Number.MAX_SAFE_INTEGER).toString(),d=()=>h({type:"DISMISS_TOAST",toastId:b});return h({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||d()}}}),{id:b,dismiss:d,update:a=>h({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function j(){let[a,c]=b.useState(g);return b.useEffect(()=>(f.push(c),()=>{let a=f.indexOf(c);a>-1&&f.splice(a,1)}),[a]),{...a,toast:i,dismiss:a=>h({type:"DISMISS_TOAST",toastId:a})}}a.s(["useToast",()=>j])},1876,20371,a=>{"use strict";var b=a.i(28308),c=a.i(13655),d=a.i(16639),e=a.i(40565),f=a.i(45838),g=a.i(92734),h=(0,g.createServerReference)("00f65572580b2ecdd80a758bb37598a08e74e7cea3",g.callServer,void 0,g.findSourceMapURL,"signOut");a.s(["signOut",()=>h],20371);var i=a.i(80459);let j=(0,c.createContext)(void 0);function k({children:a}){let[g,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),n=(0,d.useRouter)(),{toast:o}=(0,e.useToast)(),p=async()=>{try{let[a,b]=await Promise.all([fetch("/api/user").then(a=>a.ok?a.json():null),fetch("/api/profile").then(a=>a.ok?a.json():null)]);if(!a)return void k(null);k({id:a.id,email:a.email,role:a.role,name:a.name??null,profile:b??null})}catch{k(null)}};(0,c.useEffect)(()=>{(async()=>{await p(),m(!1)})()},[]);let q=async(a,b)=>{let c=await (0,f.signIn)(a,b);return c?.error?(o({title:"Ошибка входа",description:"Неверный email или пароль",variant:"destructive"}),!1):(await p(),o({title:"Добро пожаловать!",description:"Вы успешно вошли в систему"}),n.push("/dashboard"),!0)},r=async(a,b,c)=>{let d=await (0,i.signUp)(a,b,c);return d?.error?(o({title:"Ошибка регистрации",description:d.error,variant:"destructive"}),!1):(await p(),o({title:"Регистрация успешна!",description:"Добро пожаловать в VDS_HUB"}),n.push("/dashboard"),!0)},s=async()=>{await h()};return(0,b.jsx)(j.Provider,{value:{user:g,login:q,register:r,logout:s,refresh:p,isLoading:l},children:a})}function l(){let a=(0,c.useContext)(j);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}a.s(["AuthProvider",()=>k,"useAuth",()=>l],1876)},45357,a=>{"use strict";var b=a.i(35189);a.s(["X",()=>b.default])},15599,a=>{"use strict";var b=a.i(28308),c=a.i(13655);let d=(0,c.createContext)(void 0);function e({children:a}){return(0,b.jsx)(d.Provider,{value:{currency:"USD",setCurrency:a=>{},formatPrice:a=>`$${a.toFixed(2)}`,convertPrice:a=>a},children:a})}function f(){let a=(0,c.useContext)(d);if(!a)throw Error("useCurrency must be used within CurrencyProvider");return a}a.s(["CurrencyProvider",()=>e,"useCurrency",()=>f])},46077,a=>{"use strict";var b=a.i(28308),c=a.i(13655);let d=(a,b)=>{},e="vds_hub_servers",f="vds_hub_transactions",g="vds_hub_promo_codes",h="vds_hub_referrals",i="vds_hub_support_tickets";var j=a.i(1876),k=a.i(40565);let l=(0,c.createContext)(void 0);function m({children:a}){let{user:m,updateUser:n}=(0,j.useAuth)(),{toast:p}=(0,k.useToast)(),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),A=()=>{r([]),t([]),v([]),x([]),z([])};(0,c.useEffect)(()=>{A()},[]);let B=a=>{let b=[...s,{...a,id:o(),createdAt:new Date().toISOString()}];if(t(b),d(f,b),"topup"===a.type&&"completed"===a.status&&m){let b=w.filter(a=>a.referredId===m.id);if(b.length>0){let c=.1*a.amount,e=b[0],f=w.map(a=>a.id===e.id?{...a,earnings:a.earnings+c}:a);x(f),d(h,f)}}};return(0,b.jsx)(l.Provider,{value:{servers:q,transactions:s,promoCodes:u,referrals:w,supportTickets:y,createServer:a=>{if(!m)return;let b=[...q,{...a,id:o(),userId:m.id,createdAt:new Date().toISOString()}];r(b),d(e,b),n({balance:m.balance-a.price}),B({userId:m.id,type:"purchase",amount:-a.price,status:"completed",description:`Purchased server: ${a.name}`}),p({title:"Сервер создан!",description:`Сервер ${a.name} успешно создан`})},deleteServer:a=>{let b=q.filter(b=>b.id!==a);r(b),d(e,b),p({title:"Сервер удален",description:"Сервер успешно удален"})},updateServer:(a,b)=>{let c=q.map(c=>c.id===a?{...c,...b}:c);r(c),d(e,c)},addTransaction:B,createPromoCode:a=>{let b=[...u,{...a,id:o(),currentUses:0}];v(b),d(g,b),p({title:"Промокод создан",description:`Промокод ${a.code} успешно создан`})},applyPromoCode:(a,b)=>{let c=u.find(b=>b.code===a&&b.active&&b.currentUses<b.maxUses&&new Date(b.expiresAt)>new Date);if(!c)return p({title:"Ошибка",description:"Промокод недействителен или истек",variant:"destructive"}),b;let e=u.map(a=>a.id===c.id?{...a,currentUses:a.currentUses+1}:a);v(e),d(g,e);let f="percentage"===c.type?b*(c.discount/100):c.discount;return p({title:"Промокод применен!",description:`Скидка: ${f.toFixed(2)}$`}),b-f},createSupportTicket:a=>{if(!m)return;let b=[...y,{...a,id:o(),userId:m.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];z(b),d(i,b),p({title:"Тикет создан",description:"Ваш запрос отправлен в поддержку"})},refreshData:()=>{A()}},children:a})}function n(){let a=(0,c.useContext)(l);if(void 0===a)throw Error("useData must be used within a DataProvider");return a}function o(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}a.s(["DataProvider",()=>m,"useData",()=>n],46077)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2725165b._.js.map