module.exports=[77687,a=>{"use strict";var b=a.i(72131);let c=0,d=new Map,e=a=>{if(d.has(a))return;let b=setTimeout(()=>{d.delete(a),h({type:"REMOVE_TOAST",toastId:a})},1e6);d.set(a,b)},f=[],g={toasts:[]};function h(a){g=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?e(c):a.toasts.forEach(a=>{e(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(g,a),f.forEach(a=>{a(g)})}function i({...a}){let b=(c=(c+1)%Number.MAX_SAFE_INTEGER).toString(),d=()=>h({type:"DISMISS_TOAST",toastId:b});return h({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||d()}}}),{id:b,dismiss:d,update:a=>h({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function j(){let[a,c]=b.useState(g);return b.useEffect(()=>(f.push(c),()=>{let a=f.indexOf(c);a>-1&&f.splice(a,1)}),[a]),{...a,toast:i,dismiss:a=>h({type:"DISMISS_TOAST",toastId:a})}}a.s(["useToast",()=>j])},38422,13666,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(77687),f=a.i(83279),g=a.i(5050),h=(0,g.createServerReference)("00b7a54d21b0b86ece275fa7813f89366ea75a820b",g.callServer,void 0,g.findSourceMapURL,"signOut");a.s(["signOut",()=>h],13666);var i=a.i(42385);let j=(0,c.createContext)(void 0);function k({children:a}){let[g,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),n=(0,d.useRouter)(),{toast:o}=(0,e.useToast)(),p=async()=>{try{let[a,b]=await Promise.all([fetch("/api/user").then(a=>a.ok?a.json():null),fetch("/api/profile").then(a=>a.ok?a.json():null)]);if(!a)return void k(null);k({id:a.id,email:a.email,role:a.role,name:a.name??null,profile:b??null})}catch{k(null)}};(0,c.useEffect)(()=>{(async()=>{await p(),m(!1)})()},[]);let q=async(a,b)=>{let c=await (0,f.signIn)(a,b);return c?.error?(o({title:"Ошибка входа",description:"Неверный email или пароль",variant:"destructive"}),!1):(await p(),o({title:"Добро пожаловать!",description:"Вы успешно вошли в систему"}),n.push("/dashboard"),!0)},r=async(a,b,c)=>{let d=await (0,i.signUp)(a,b,c);return d?.error?(o({title:"Ошибка регистрации",description:d.error,variant:"destructive"}),!1):(await p(),o({title:"Регистрация успешна!",description:"Добро пожаловать в VDS_HUB"}),n.push("/dashboard"),!0)},s=async()=>{await h()};return(0,b.jsx)(j.Provider,{value:{user:g,login:q,register:r,logout:s,refresh:p,isLoading:l},children:a})}function l(){let a=(0,c.useContext)(j);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}a.s(["AuthProvider",()=>k,"useAuth",()=>l],38422)},52100,a=>{"use strict";var b=function(a,c){return(b=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,c)};function c(a,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=a}b(a,c),a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}var d=function(){return(d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function e(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function f(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}"function"==typeof SuppressedError&&SuppressedError,a.s(["__assign",()=>d,"__extends",()=>c,"__rest",()=>e,"__spreadArray",()=>f])},42385,a=>{"use strict";var b=a.i(5050),c=(0,b.createServerReference)("78ec3c19114371ecd046e7540ca778b77819401d7b",b.callServer,void 0,b.findSourceMapURL,"signUp");a.s(["signUp",()=>c])},83279,a=>{"use strict";var b=a.i(5050),c=(0,b.createServerReference)("60b0f96e7b5010fb12435a4dcc7c4737919fe5bbdc",b.callServer,void 0,b.findSourceMapURL,"signIn");a.s(["signIn",()=>c])}];

//# sourceMappingURL=_e45571f7._.js.map