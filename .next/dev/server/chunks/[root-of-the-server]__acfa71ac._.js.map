{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saefs/Downloads/vds-hub/vds-hub/public/vds-hub/vds-hub/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\"\r\n\r\ndeclare global {\r\n  // eslint-disable-next-line no-var\r\n  var prisma: PrismaClient | undefined\r\n}\r\n\r\nexport const prisma: PrismaClient = global.prisma ?? new PrismaClient()\r\n\r\nif (process.env.NODE_ENV !== \"production\") {\r\n  global.prisma = prisma\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAOO,MAAM,SAAuB,OAAO,MAAM,IAAI,IAAI,6IAAY;AAErE,wCAA2C;IACzC,OAAO,MAAM,GAAG;AAClB","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saefs/Downloads/vds-hub/vds-hub/public/vds-hub/vds-hub/lib/jwt.ts"],"sourcesContent":["import { SignJWT, jwtVerify } from \"jose\"\n\nconst JWT_SECRET = new TextEncoder().encode(process.env.JWT_SECRET || \"your-secret-key-change-in-production\")\nconst JWT_EXPIRES_IN = \"7d\"\n\nexport interface JWTPayload {\n  userId: string\n  email: string\n  role: string\n}\n\nexport async function signToken(payload: JWTPayload): Promise<string> {\n  return await new SignJWT(payload)\n    .setProtectedHeader({ alg: \"HS256\" })\n    .setIssuedAt()\n    .setExpirationTime(JWT_EXPIRES_IN)\n    .sign(JWT_SECRET)\n}\n\nexport async function verifyToken(token: string): Promise<JWTPayload | null> {\n  try {\n    const { payload } = await jwtVerify(token, JWT_SECRET)\n    return payload as JWTPayload\n  } catch (error) {\n    return null\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEA,MAAM,aAAa,IAAI,cAAc,MAAM,CAAC,QAAQ,GAAG,CAAC,UAAU,IAAI;AACtE,MAAM,iBAAiB;AAQhB,eAAe,UAAU,OAAmB;IACjD,OAAO,MAAM,IAAI,iPAAO,CAAC,SACtB,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,WAAW,GACX,iBAAiB,CAAC,gBAClB,IAAI,CAAC;AACV;AAEO,eAAe,YAAY,KAAa;IAC7C,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,qPAAS,EAAC,OAAO;QAC3C,OAAO;IACT,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/saefs/Downloads/vds-hub/vds-hub/public/vds-hub/vds-hub/app/api/transactions/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { prisma } from '@/lib/prisma'\r\nimport { cookies } from 'next/headers'\r\nimport { verifyToken } from '@/lib/jwt' // Исправлено: импорт из jwt\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    // Получаем userId из сессии/токена\r\n    const cookieStore = await cookies()\r\n    const token = cookieStore.get('auth-token')?.value // Или как у вас называется cookie\r\n    \r\n    if (!token) {\r\n      return NextResponse.json({ \r\n        error: 'Unauthorized' \r\n      }, { status: 401 })\r\n    }\r\n\r\n    // Верифицируем токен и получаем userId\r\n    const decoded = await verifyToken(token)\r\n    const userId = decoded?.userId\r\n    \r\n    if (!userId) {\r\n      return NextResponse.json({ \r\n        error: 'Invalid token' \r\n      }, { status: 401 })\r\n    }\r\n\r\n    const transactions = await prisma.transaction.findMany({\r\n      where: { userId },\r\n      orderBy: { createdAt: 'desc' },\r\n      take: 50,\r\n    })\r\n\r\n    return NextResponse.json(transactions)\r\n  } catch (err: any) {\r\n    console.error('Transactions error:', err)\r\n    return NextResponse.json({ \r\n      error: err.message \r\n    }, { status: 500 })\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA,6TAAwC,4BAA4B;;;;;AAE7D,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,mCAAmC;QACnC,MAAM,cAAc,MAAM,IAAA,2NAAO;QACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,eAAe,MAAM,kCAAkC;;QAErF,IAAI,CAAC,OAAO;YACV,OAAO,+NAAY,CAAC,IAAI,CAAC;gBACvB,OAAO;YACT,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,uCAAuC;QACvC,MAAM,UAAU,MAAM,IAAA,0MAAW,EAAC;QAClC,MAAM,SAAS,SAAS;QAExB,IAAI,CAAC,QAAQ;YACX,OAAO,+NAAY,CAAC,IAAI,CAAC;gBACvB,OAAO;YACT,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,MAAM,eAAe,MAAM,wMAAM,CAAC,WAAW,CAAC,QAAQ,CAAC;YACrD,OAAO;gBAAE;YAAO;YAChB,SAAS;gBAAE,WAAW;YAAO;YAC7B,MAAM;QACR;QAEA,OAAO,+NAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,+NAAY,CAAC,IAAI,CAAC;YACvB,OAAO,IAAI,OAAO;QACpB,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF","debugId":null}}]
}