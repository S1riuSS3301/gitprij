{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/daniilapet/Downloads/_next/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\"\r\n\r\ndeclare global {\r\n  // eslint-disable-next-line no-var\r\n  var prisma: PrismaClient | undefined\r\n}\r\n\r\nexport const prisma: PrismaClient = global.prisma ?? new PrismaClient()\r\n\r\nif (process.env.NODE_ENV !== \"production\") {\r\n  global.prisma = prisma\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAOO,MAAM,SAAuB,OAAO,MAAM,IAAI,IAAI,6IAAY;AAErE,wCAA2C;IACzC,OAAO,MAAM,GAAG;AAClB","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/daniilapet/Downloads/_next/lib/storage.ts"],"sourcesContent":["// Local storage utilities for data persistence\nconst STORAGE_KEYS = {\n  USER: \"vds_hub_user\",\n  USERS: \"vds_hub_users\",\n  SERVERS: \"vds_hub_servers\",\n  TRANSACTIONS: \"vds_hub_transactions\",\n  ACTIVITY_LOGS: \"vds_hub_activity_logs\",\n  PROMO_CODES: \"vds_hub_promo_codes\",\n  REFERRALS: \"vds_hub_referrals\",\n  SUPPORT_TICKETS: \"vds_hub_support_tickets\",\n}\n\nexport const storage = {\n  get: (key: string): any | null => {\n    if (typeof window === \"undefined\") return null\n    const item = localStorage.getItem(key)\n    return item ? JSON.parse(item) : null\n  },\n\n  set: (key: string, value: any): void => {\n    if (typeof window === \"undefined\") return\n    localStorage.setItem(key, JSON.stringify(value))\n  },\n\n  remove: (key: string): void => {\n    if (typeof window === \"undefined\") return\n    localStorage.removeItem(key)\n  },\n\n  clear: (): void => {\n    if (typeof window === \"undefined\") return\n    localStorage.clear()\n  },\n}\n\nexport const KEYS = STORAGE_KEYS\n"],"names":[],"mappings":"AAAA,+CAA+C;;;;;;;AAC/C,MAAM,eAAe;IACnB,MAAM;IACN,OAAO;IACP,SAAS;IACT,cAAc;IACd,eAAe;IACf,aAAa;IACb,WAAW;IACX,iBAAiB;AACnB;AAEO,MAAM,UAAU;IACrB,KAAK,CAAC;QACJ,wCAAmC,OAAO;;;QAC1C,MAAM;IAER;IAEA,KAAK,CAAC,KAAa;QACjB,wCAAmC;;;IAErC;IAEA,QAAQ,CAAC;QACP,wCAAmC;;;IAErC;IAEA,OAAO;QACL,wCAAmC;;;IAErC;AACF;AAEO,MAAM,OAAO","debugId":null}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/daniilapet/Downloads/_next/lib/auth.ts"],"sourcesContent":["import type { User, ActivityLog } from \"./types\"\nimport { storage, KEYS } from \"./storage\"\n\nexport const auth = {\n  login: (email: string, password: string): User | null => {\n    // Исправлено: убрана типизация get (JS storage API не поддерживает дженерики)\n    const users = (storage.get(KEYS.USERS) as User[]) || []\n    // Исправлено: определен тип для 'u'\n    const user = users.find((u: User) => u.email === email)\n    if (!user) return null\n\n    logActivity(user.id, \"login\", \"User logged in\")\n    storage.set(KEYS.USER, user)\n    return user\n  },\n\n  register: (email: string, password: string, telegram?: string, referralCode?: string): User | null => {\n    const users = (storage.get(KEYS.USERS) as User[]) || []\n\n    if (users.find((u: User) => u.email === email)) {\n      return null\n    }\n\n    const userReferralCode = generateReferralCode()\n\n    const newUser: User = {\n      id: generateId(),\n      email,\n      role: \"user\",\n      balance: 0,\n      registeredAt: new Date().toISOString(),\n      telegram,\n      referralCode: userReferralCode,\n      referredBy: referralCode,\n      totalTopUps: 0,\n    }\n\n    users.push(newUser)\n    storage.set(KEYS.USERS, users)\n\n    // Handle referral\n    if (referralCode) {\n      const referrer = users.find((u: User) => u.referralCode === referralCode)\n      if (referrer) {\n        // Исправлено: убрана дженерик типизация get\n        const referrals = (storage.get(KEYS.REFERRALS) as any[]) || []\n        referrals.push({\n          id: generateId(),\n          referrerId: referrer.id,\n          referredId: newUser.id,\n          earnings: 0,\n          createdAt: new Date().toISOString(),\n        })\n        storage.set(KEYS.REFERRALS, referrals)\n      }\n    }\n\n    logActivity(newUser.id, \"register\", \"User registered\")\n    storage.set(KEYS.USER, newUser)\n    return newUser\n  },\n\n  logout: (): void => {\n    const user = storage.get(KEYS.USER) as User | null\n    if (user) {\n      logActivity(user.id, \"logout\", \"User logged out\")\n    }\n    storage.remove(KEYS.USER)\n  },\n\n  getCurrentUser: (): User | null => {\n    return storage.get(KEYS.USER) as User | null\n  },\n\n  updateUser: (updates: Partial<User>): void => {\n    const user = storage.get(KEYS.USER) as User | null\n    if (!user) return\n\n    const updatedUser: User = { ...user, ...updates }\n    storage.set(KEYS.USER, updatedUser)\n\n    const users = (storage.get(KEYS.USERS) as User[]) || []\n    const index = users.findIndex((u: User) => u.id === user.id)\n    if (index !== -1) {\n      users[index] = updatedUser\n      storage.set(KEYS.USERS, users)\n    }\n  },\n}\n\nfunction generateId(): string {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n}\n\nfunction generateReferralCode(): string {\n  return Math.random().toString(36).substr(2, 8).toUpperCase()\n}\n\nfunction logActivity(userId: string, action: string, details: string): void {\n  const logs = (storage.get(KEYS.ACTIVITY_LOGS) as ActivityLog[]) || []\n  logs.push({\n    id: generateId(),\n    userId,\n    action,\n    ip: \"127.0.0.1\", // Mock IP\n    timestamp: new Date().toISOString(),\n    details,\n  })\n  storage.set(KEYS.ACTIVITY_LOGS, logs)\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///Users/daniilapet/Downloads/_next/app/api/transactions/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { prisma } from '@/lib/prisma'\r\nimport { cookies } from 'next/headers'\r\nimport { verifyToken } from '@/lib/auth' // Импортируйте вашу функцию проверки токена\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    // Получаем userId из сессии/токена\r\n    const cookieStore = cookies()\r\n    const token = cookieStore.get('auth-token')?.value // Или как у вас называется cookie\r\n    \r\n    if (!token) {\r\n      return NextResponse.json({ \r\n        error: 'Unauthorized' \r\n      }, { status: 401 })\r\n    }\r\n\r\n    // Верифицируем токен и получаем userId\r\n    const decoded = await verifyToken(token)\r\n    const userId = decoded?.userId || decoded?.id\r\n    \r\n    if (!userId) {\r\n      return NextResponse.json({ \r\n        error: 'Invalid token' \r\n      }, { status: 401 })\r\n    }\r\n\r\n    const transactions = await prisma.transaction.findMany({\r\n      where: { userId },\r\n      orderBy: { createdAt: 'desc' },\r\n      take: 50,\r\n    })\r\n\r\n    return NextResponse.json(transactions)\r\n  } catch (err: any) {\r\n    console.error('Transactions error:', err)\r\n    return NextResponse.json({ \r\n      error: err.message \r\n    }, { status: 500 })\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA,+LAAyC,4CAA4C;;;;;AAE9E,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,mCAAmC;QACnC,MAAM,cAAc,IAAA,4IAAO;QAC3B,MAAM,QAAQ,YAAY,GAAG,CAAC,eAAe,MAAM,kCAAkC;;QAErF,IAAI,CAAC,OAAO;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,OAAO;YACT,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,uCAAuC;QACvC,MAAM,UAAU,MAAM,IAAA,4HAAW,EAAC;QAClC,MAAM,SAAS,SAAS,UAAU,SAAS;QAE3C,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,OAAO;YACT,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,MAAM,eAAe,MAAM,yHAAM,CAAC,WAAW,CAAC,QAAQ,CAAC;YACrD,OAAO;gBAAE;YAAO;YAChB,SAAS;gBAAE,WAAW;YAAO;YAC7B,MAAM;QACR;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,OAAO,IAAI,OAAO;QACpB,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF","debugId":null}}]
}